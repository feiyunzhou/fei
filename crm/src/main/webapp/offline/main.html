<!DOCTYPE html>
<html manifest="cache.appcache" dir="ltr" lang="zh-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href='../fullcalendar/fullcalendar.css' rel='stylesheet' />
<link href='../fullcalendar/fullcalendar.print.css' rel='stylesheet' media='print' />
<link href="../jquery/css/smoothness/jquery-ui-1.10.2.custom.css" rel="stylesheet">
<script src='../jquery/js/jquery-1.9.1.js'></script>
<script src='../jquery/js/jquery-ui-1.10.2.custom.min.js'></script>
<!-- <script src='../jquery-ui-bootstrap/js/jquery-ui-1.9.2.custom.min.js'></script> -->
<script src='../fullcalendar/fullcalendar.js'></script>
<script src='../js/dataclient.js'></script>
<script src="../bootstrap/js/bootstrap.js"></script>
<link href="../bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">

<script type="text/javascript" src="../bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
<link rel="stylesheet" href="../bootstrap-timepicker/css/bootstrap-timepicker.css" />

<!-- <script type="text/javascript" src="../bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" href="../bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" /> -->

<script src="../datatable/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" href="../datatable/css/jquery.dataTables.css" />

<script src="../datatable/js/dataTables.bootstrap.js"></script>
<link rel="stylesheet" href="../datatable/css/dataTables.bootstrap.css" />

<link rel="stylesheet" href="../select2/select2.css" />
<script src="../select2/select2.js"></script>
<script src="../select2/select2_locale_zh-CN.js"></script>

<link rel="stylesheet" href="../bootstrap_datetimepicker/css/datetimepicker.css" />
<script src="../bootstrap_datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script src="../bootstrap_datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>

<script src="../js/timeselector.js"></script>

<link href="../css/common.css" rel="stylesheet" />

<script>
    var isOnline;
    var contacts_by_accountId = {};
    $(document).ready(function() {
        if (window.applicationCache) {
            applicationCache.addEventListener('updateready', function() {
                if (confirm('An update is available. Reload now?')) {
                    window.location.reload();
                }
            });
        }

        window.applicationCache.addEventListener('checking', logEvent, false);
        window.applicationCache.addEventListener('noupdate', logEvent, false);
        window.applicationCache.addEventListener('downloading', logEvent, false);
        window.applicationCache.addEventListener('progress', logEvent, false);
        window.applicationCache.addEventListener('cached', logEvent, false);
        window.applicationCache.addEventListener('updateready', logEvent, false);
        window.applicationCache.addEventListener('obsolete', logEvent, false);
        window.applicationCache.addEventListener('error', logEvent, false);

        function logEvent(event) {
            console.log(event.type);
        }

        $('#myTab a').click(function(e) {
            e.preventDefault();
            $(this).tab('show');
        });

        $("#dialog").dialog({
            width : 400,
            height : 500,
            buttons : [ {
                text : "Ok",
                click : function() {
                    var starttime = $("#datestr").val() + " " + $("#from").val() + ":00";
                    var endtime = $("#datestr").val() + " " + $("#to").val() + ":00";
                    console.log("from:" + starttime + " to:" + endtime);
                    var event = {};
                    var event_type = parseInt($("#visit_type_input").val());
                    event.title = "拜访";
                    event.start = starttime;
                    event.end = endtime;
                    event.activity_type = event_type;
                    //$('#calendar').fullCalendar('renderEvent', event, true);
                    //$('#calendar').fullCalendar('rerenderEvents');
                    //$('#calendar').fullCalendar('refetchEvents');
                    $(this).dialog("close");

                    var type = "拜访";

                    var userEvent = {
                        title : "拜访",
                        crmUserId : "20",
                        start : starttime,
                        end : endtime,
                        allDay : false,
                        activity_type : event_type
                    };

                    if (navigator.onLine) {
                        //save event to the server, and query remote event after post event
                        postEvent(userEvent, false);

                    } else {

                        saveEventLocally(userEvent);

                        setEventColor(event);

                        $('#calendar').fullCalendar('renderEvent', event, true);
                        $('#calendar').fullCalendar('rerenderEvents');
                        $('#calendar').fullCalendar('refetchEvents');

                    }
                }
            }, {
                text : "Cancel",
                click : function() {
                    $(this).dialog("close");
                }
            } ],
            autoOpen : false
        });

        function setEventColor(event) {
            if (event.activity_type === 1) {
                //#D06B64; #5484ed;#a4bdfc;rgb(255, 136, 124);                  
                event.color = "#5484ed";
                event.title = "常规拜访"
            } else if (event.activity_type === 2) {
                event.color = "#D06B64";
                event.title = "会议拜访"
            } else {
                event.color = "#a4bdfc";
                event.title = "其他拜访"
            }
            return event;
        }

        function saveEventLocally(userEvent) {
            var ed = localStorage["events"];
            ed = JSON.parse(ed);
            ed.push(userEvent);
            setLocalStorage(ed);
        }

        function postEvent(userEvent, isEventInLocalStorage) {
            var args = {};
            args.f = "setEvent";
            args.p = [ userEvent.crmUserId, userEvent.activity_type, userEvent.title, userEvent.start, userEvent.end ];
            ajaxPost2(args, function onAjaxComplete(resp) {
                isOnline = true;
                console.log(resp);
                if (resp.code == 0) {
                    //query all events and set it to localStorage
                    getRemoteEvents();

                } else {
                    console.log("failed to set event");
                }

                return resp.code;
            }, function onError(status) {
                isOnline = false;
                if (!isEventInLocalStorage)
                    saveEventLocally(userEvent);
            });
        }

        function postEvents(userEvents, isEventInLocalStorage) {
            for ( var i = 0; i < userEvents.length - 1; i++) {
                postEvent(userEvents[i], isEventInLocalStorage);
            }

            var args = {};
            args.f = "setEvent";
            var userEvent = userEvents[userEvents.length - 1];
            args.p = [ userEvent.crmUserId, userEvent.activity_type, userEvent.title, userEvent.start, userEvent.end ];
            ajaxPost2(args, function onAjaxComplete(resp) {
                console.log(resp);
                isOnline = true;
                if (resp.code == 0) {
                    console.log("set event successfully");

                    //query all events and set it to localStorage
                    getRemoteEvents();

                } else {
                    console.log("failed to set event");
                }

                return resp.code;
            }, function onError(status) {
                isOnline = false;
                if (!isEventInLocalStorage)
                    saveEventLocally(userEvent);
                renderEventsWithDataLocal();
            });
        }

        /* initialize the calendar
        -----------------------------------------------------------------*/

        $('#calendar').fullCalendar({
            header : {
                left : 'prev,next today',
                center : 'title',
                right : 'month,agendaWeek,agendaDay'
            },
            height : 500,
            editable : false,
            monthNames : [ '1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月' ],
            monthNamesShort : [ '1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月' ],
            dayNames : [ '星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期天' ],
            dayNamesShort : [ '周一', '周二', '周三', '周四', '周五', '周六', '周日' ],
            columnFormat : {
                month : 'ddd',
                week : 'M/d ddd',
                day : 'M/d dddd'
            },
            titleFormat : {
                month : 'yyyy年MMMM',
                week : "yyyy年MMMd日 '&#8212;' yyyy年MMMd日",
                day : 'yyyy年MMMd, dddd'
            },
            buttonText : {
                prev : '&lsaquo;', // <
                next:     '&rsaquo;', // >
                prevYear : '&laquo;', // <<
                nextYear: '&raquo;',  // >>
                today : '今天',
                month : '月',
                week : '周',
                day : '日'
            },
            dayRender : function(date, cell) {
                cell.prepend('<span class=\"newEventSpan pull-left\" style="display:none"><a class="newEventLink" href="#">新建</a></span>');
                cell.css("min-height", "");
            },
            dayClick : function(date, allDay, jsEvent, view) {

                if (allDay) {
                    console.log('Clicked on the entire day: ' + date);
                } else {
                    console.log('Clicked on the slot: ' + date);
                }

                console.log('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);

                console.log('Current view: ' + view.name);

                // change the day's background color just for fun
                // $(this).css('background-color', 'red');

                var clickdate = $.fullCalendar.formatDate(date, "yyyy-MM-dd");
                $("#datestr").val(clickdate);
                //$("#datestr").text(clickdate);
                $("#dialog").dialog("option", "title", clickdate + " 拜访活动");
                //$("#dialog").dialog('open');
                $("#visit_type_input").focus();
                $(".newEventSpan").hide();
                //$('#myModal').modal();
                //$("#event_editor_container").show();
                $(this).find(".newEventSpan").show();
                //$(this).find(".newEventSpan").fadeOut(10000);

            }
        });

        $(".newEventLink").on("click", function(event) {
            $("#main_container").toggle();
            $("#event_editor_container").toggle();
        });

        function checkOnline() {
            var args = {};
            args.f = "ping";
            args.p = [];
            ajaxPost2(args, function onComplete(resp) {
                isOnline = true;
            }, function onError(status) {
                isOnline = false;
            });

            return (navigator.onLine && isOnline);
        }

        if (navigator.onLine) {
            console.log("online");

            //query localstorage to get the local event which not send to the serve when offline
            var localevents = localStorage["events"];
            if (localevents != null) {
                localevents = JSON.parse(localevents);
                var eventswithoutid = [];
                if ((localevents != null) && (localevents.length > 0)) {
                    for ( var i = 0; i < localevents.length; i++) {
                        if ((typeof localevents[i].id === 'undefined') || localevents[i].id == null) {
                            eventswithoutid.push(localevents[i]);
                        }
                    }
                }
                console.log("eventswithoutid");
                console.log(eventswithoutid);
                if (eventswithoutid.length > 0) {
                    var resp = -1;
                    postEvents(eventswithoutid, true);
                } else {
                    getRemoteEvents();
                }
            } else {

                getRemoteEvents();
            }

        } else {
            console.log("Offline");
            renderEventsWithDataLocal();

        }

        function getRemoteEvents() {
            var args = {};
            args.f = "getEventsByUserId";
            args.p = [ "20" ];
            ajaxPost2(args, function onAjaxComplete(eventData) {
                isOnline = true;
                console.log(eventData);
                if (eventData.length > 0) {
                    setLocalStorage(eventData);
                    renderCalendar(eventData);
                }
            }, function onError(status) {
                isOnline = false;
                renderEventsWithDataLocal();
            });
        }

        function renderEventsWithDataLocal() {
            var ed = localStorage["events"];
            console.log("render event with data locally");
            if (jQuery.isEmptyObject(ed) === false) {
                console.log("here it is");
                var neweventdata = JSON.parse(ed);
                console.log(neweventdata);
                renderCalendar(neweventdata);

            }
        }

        function setLocalStorage(etData) {
            var dupData = [];
            for ( var i = 0; i < etData.length; i++) {
                var tmpEv = {
                    title : etData[i].title,
                    id : etData[i].id,
                    start : etData[i].start,
                    end : etData[i].end,
                    crmUserId : etData[i].crmUserId,
                    activity_type : etData[i].activity_type

                };
                dupData.push(tmpEv);
            }
            localStorage["events"] = JSON.stringify(dupData);
        }

        function renderCalendar(eventdata) {
            //$('#calendar').fullCalendar( 'render' );
            //remove all events on calendar
            $('#calendar').fullCalendar('removeEvents', function filter(event) {
                //console.log("remove" + event.id);
                return true;
            });

            for ( var i = 0; i < eventdata.length; i++) {
                //console.log(data[i]);

                if (eventdata[i].activity_type === 1) {
                    //#D06B64; #5484ed;#a4bdfc;rgb(255, 136, 124);                  
                    eventdata[i].color = "#5484ed";
                    eventdata[i].title = "常规拜访"
                } else if (eventdata[i].activity_type === 2) {
                    eventdata[i].color = "#D06B64";
                    eventdata[i].title = "会议拜访"
                } else {
                    eventdata[i].color = "#a4bdfc";
                    eventdata[i].title = "其他拜访"
                }
                $('#calendar').fullCalendar('renderEvent', eventdata[i], true);
            }
            $('#calendar').fullCalendar('render');

            /*  $('#calendar').fullCalendar({
                events:eventdata
             });  */
        }

        $("#testbut").on("click", function(event) {
            console.log("but clicked");
            alert(navigator.onLine);
        });

        $("#refreshbt").on("click", function(event) {
            window.location.reload();
        });

        // Begin of contact typeahead 
        function setContact2LocalStorage(data) {
            localStorage["crmcontacts"] = JSON.stringify(data);
        }

        function getContactsFromLocalStorage(data) {
            return JSON.parse(localStorage["crmcontacts"]);
        }

        var selected_contact_id;
        function renderContactTypeaheadWithDataRemote() {
            var args = {};
            args.f = "getContactData";
            args.p = [ '20' ];
            ajaxPost2(args, function onComplete(resp) {
                isOnline = true;
                setContact2LocalStorage(resp);
                renderContactTypeahead(resp);
            }, function onError(status) {
                isOnline = false;
                renderContactTypeaheadWithDataLocal();
            });
        }

        function renderContactTypeaheadWithDataLocal() {
            var contacts = getContactsFromLocalStorage();
            if (jQuery.isEmptyObject(contacts) === false) {
                renderContactTypeahead(contacts);
            }
        }

        function renderContactTypeahead(contacts_data) {
            //set type ahead
            var contacts = [];
            var map = {};
            $('#contact_search').typeahead({
                source : function(query, process) {
                    $.each(contacts_data, function(i, contact) {
                        map[contact.name] = contact;
                        contacts.push(contact.name);
                    });
                    process(contacts);
                },
                updater : function(item) {
                    selected_contact_id = map[item].id;
                    console.log("selected id:" + selected_contact_id);
                    return item;
                },

                highlighter : function(item) {
                    return item + " - " + map[item].accountBelongTo;
                },
            });
        }

        if (navigator.onLine) {
            renderContactTypeaheadWithDataRemote();

        } else {
            renderContactTypeaheadWithDataLocal();
        }

        //END of contact typeahead 

        //Start to render account table
        function renderAccountTableWithDataRemote() {
            var args = {};
            args.f = "getAccountTable";
            args.p = [ '20' ];
            ajaxPost2(args, function onComplete(data) {
                if (jQuery.isEmptyObject(data) === false) {
                    setAccountTable2Localstorage(data);
                    $('#dt_account').dataTable(data);
                }
            }, function onError(status) {
                isOnline = false;
                renderAccountTableWithDataLocal();
            });
        }

        function renderAccountTableWithDataLocal() {
            var accountTableData = getAccountTableFromLocalstorage();
            if (jQuery.isEmptyObject(accountTableData) === false) {
                $('#dt_account').dataTable(accountTableData);
            }
        }

        function setAccountTable2Localstorage(data) {
            localStorage["accounttable"] = JSON.stringify(data);
        }

        function getAccountTableFromLocalstorage() {
            return JSON.parse(localStorage["accounttable"]);
        }

        if (navigator.onLine) {
            renderAccountTableWithDataRemote();
        } else {
            renderAccountTableWithDataLocal();
        }
        // END of render account table

        //Start to render contact table
        function renderContactTableWithDataRemote() {
            var args = {};
            args.f = "getContactTable";
            args.p = [ '20' ];
            ajaxPost2(args, function onComplete(data) {
                if (jQuery.isEmptyObject(data) === false) {
                    setContactTable2Localstorage(data);
                    $('#dt_contact').dataTable(data);
                }
            }, function onError(status) {
                isOnline = false;
                renderContactTableWithDataLocal();
            });
        }

        function renderContactTableWithDataLocal() {
            var contactTableData = getContactTableFromLocalstorage();
            if (jQuery.isEmptyObject(contactTableData) === false) {
                $('#dt_contact').dataTable(contactTableData);
            }
        }

        function setContactTable2Localstorage(data) {
            localStorage["contacttable"] = JSON.stringify(data);
        }

        function getContactTableFromLocalstorage() {
            return JSON.parse(localStorage["contacttable"]);
        }

        if (navigator.onLine) {
            renderContactTableWithDataRemote();
        } else {
            renderContactTableWithDataLocal();
        }
        // END of render contact table

        // Begin of timepicker
        $('#from,#to').timepicker({
            minuteStep : 30,
            disableFocus : true,
            showSeconds : false,
            showMeridian : false,
            showInputs : false,
            template: 'modal'
        });
        // End of timepicker

        //Start of rendering account selector
        if (navigator.onLine) {
            renderAccountSelectorWithDataRemote();
            getContactsOfUserRemotely();
        } else {
            renderAccountSelectorWithDataLocal();
            getContactsOfUserLocally();
        }

        function selectformat(item) {
            return item.name;
        }
        ;

        function renderAccountSelect2(optionsData) {
            $('#account_select').select2({
                data : {
                    results : optionsData,
                    text : 'name'
                },
                formatSelection : selectformat,
                formatResult : selectformat
            });

            $("#account_select").on("change", function(e) {
                console.log("change " + JSON.stringify({
                    val : e.val,
                    added : e.added,
                    removed : e.removed
                }));
                $('#contact_label').show();
                var cts = getContactsByAccountId(e.val);
                console.log(e.val + "'s contacts:" + JSON.stringify(cts));
                $("#contact_select").select2({
                    data : {
                        results : cts,
                        text : 'name'
                    },
                    formatSelection : selectformat,
                    formatResult : selectformat
                });

            });
        }

        function getContactsOfUserLocally() {
            contacts_by_accountId = getContactsOfUserFromLocalstorage();
        }

        function getContactsOfUserRemotely() {
            //Start of ajax query for the contacts
            var args = {};
            args.f = "queryContactsByUserId";
            args.p = [ '20' ];
            ajaxPost2(args, function onComplete(data) {
                isOnline = true;
                if (jQuery.isEmptyObject(data) === false) {
                    setContactsOfUser2Localstorage(data);
                    console.log(data);
                    contacts_by_accountId = data;
                }
            }, function onError(status) {
                isOnline = false;
                getContactsOfUserLocally();
            });
            //End of ajax query
        }

        function getContactsByAccountId(accountId) {
            console.log(accountId + " contacts_by_accountId:" + JSON.stringify(contacts_by_accountId));
            if (accountId in contacts_by_accountId) {
                return contacts_by_accountId[accountId];
            }
            return [];
        }

        function renderAccountSelectorWithDataRemote() {
            var args = {};
            args.f = "queryAccountsOfUser";
            args.p = [ '20' ];
            ajaxPost2(args, function onComplete(data) {
                isOnline = true;
                if (jQuery.isEmptyObject(data) === false) {
                    setAccountsOfUser2Localstorage(data);
                    console.log(data);
                    renderAccountSelect2(data);
                }
            }, function onError(status) {
                isOnline = false;
                renderAccountSelectorWithDataLocal();
            });
        }

        function renderAccountSelectorWithDataLocal() {
            var data = getAccountsOfUserFromLocalstorage();
            if (jQuery.isEmptyObject(data) === false) {
                renderAccountSelect2(data);
            }
        }

        function setAccountsOfUser2Localstorage(data) {
            localStorage["accountofuser"] = JSON.stringify(data);
        }

        function getAccountsOfUserFromLocalstorage() {
            return JSON.parse(localStorage["accountofuser"]);
        }

        function setContactsOfUser2Localstorage(data) {
            localStorage["contactofuser"] = JSON.stringify(data);
        }

        function getContactsOfUserFromLocalstorage() {
            return JSON.parse(localStorage["contactofuser"]);
        }

        //END of rendering account selector

        /******START of event editor*****/
        $("#event_ret_bt").on("click", function(event) {
            $("#event_editor_container").toggle();
            $("#main_container").toggle();
        });

        $("#event_ok_bt").on("click", function(event) {
            
            var starttime = $("#datestr").val() + " " + $("#select_time_from").val() + ":00";
            var endtime = $("#datestr").val() + " " + $("#select_time_to").val() + ":00";
            console.log("from:" + starttime + " to:" + endtime);
            var event = {};
            var event_type = parseInt($("#visit_type_input").val());
            event.title = "拜访";
            event.start = starttime;
            event.end = endtime;
            event.activity_type = event_type;
            //$('#calendar').fullCalendar('renderEvent', event, true);
            //$('#calendar').fullCalendar('rerenderEvents');
            //$('#calendar').fullCalendar('refetchEvents');

            var type = "拜访";

            var userEvent = {
                title : "拜访",
                crmUserId : "20",
                start : starttime,
                end : endtime,
                allDay : false,
                activity_type : event_type
            };

            if (navigator.onLine) {
                //save event to the server, and query remote event after post event
                postEvent(userEvent, false);

            } else {

                saveEventLocally(userEvent);

                setEventColor(event);

                $('#calendar').fullCalendar('renderEvent', event, true);
                $('#calendar').fullCalendar('rerenderEvents');
                $('#calendar').fullCalendar('refetchEvents');

            }
            
            $("#event_editor_container").toggle();
            $("#main_container").toggle();
            
        });
        
        $("#select_time_from").timeselector();
        $("#select_time_to").timeselector();
        /******END of event editor*****/

    });
</script>
<style type="text/css">
body {
	/* 	padding-top: 60px; */
	padding-bottom: 40px;
}

.sidebar-nav {
	padding: 9px 0;
}

@media ( max-width : 980px) {
	/* Enable use of floated navbar text */
	.navbar-text.pull-right {
		float: none;
		padding-left: 5px;
		padding-right: 5px;
	}
}
</style>
<title>CRM</title>
</head>
<body>
	<div class="navbar">
		<div class="navbar-inner">
			<div class="container-fluid">
				<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
				<a class="brand" href="#">CRM Offline</a>
				<div class="nav-collapse collapse">
					<p class="navbar-text pull-right">
						<a href="#" class="navbar-link">杰伦，你好！</a>
					</p>
				</div>
			</div>
		</div>
	</div>

	<div id="main_container" class="container-fluid">
		<div class="row-fluid">
			<div class="span12">
			
				<div class="pull-right">
					<button class="btn btn-mini" id="refreshbt">刷新</button>
				</div>
				<ul class="nav nav-tabs" id="myTab">
					<li class="active"><a href="#home">日历</a></li>
					<li><a href="#profile">医院</a></li>
					<li><a href="#messages">医生</a></li>
					<li><a href="#intro">展示</a></li>
				</ul>

				<div class="tab-content">
					<div class="tab-pane active" id="home">
						<div id="calendar_container">
							<div id='calendar'></div>
						</div>

					</div>
					<div class="tab-pane" id="profile">
						<table id="dt_account" class="table table-hover table-striped table-bordered table-condensed">
						</table>
					</div>
					<div class="tab-pane" id="messages">
						<table id="dt_contact" class="table table-hover table-striped table-bordered table-condensed">
						</table>
					</div>
					<div class="tab-pane" id="intro">
						<div class="row-fluid">
							<div class="span12">
								<div id="myCarousel" class="carousel slide">
									<ol class="carousel-indicators">
										<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
										<li data-target="#myCarousel" data-slide-to="1"></li>
										<li data-target="#myCarousel" data-slide-to="2"></li>
									</ol>
									<!-- Carousel items -->
									<div class="carousel-inner">
										<div class="item active">
											<img src="../image/bootstrap-mdo-sfmoma-01.jpg" alt="">
											<div class="carousel-caption">
												<h4>第一页</h4>
												<p>说明1</p>
											</div>
										</div>
										<div class="item">
											<img src="../image/bootstrap-mdo-sfmoma-02.jpg" alt="">
											<div class="carousel-caption">
												<h4>第二页</h4>
												<p>说明2</p>
											</div>
										</div>
										<div class="item">
											<img src="../image/bootstrap-mdo-sfmoma-03.jpg" alt="">
											<div class="carousel-caption">
												<h4>第三页</h4>
												<p>说明3</p>
											</div>
										</div>
									</div>
									<!-- Carousel nav -->
									<a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a> <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
		<!--/row-->

		<hr>

		<footer>
			<p>&copy; Company 2013</p>
		</footer>

	</div>
	<!--/.fluid-container-->

	<!-- 	<div id="dialog" title="活动">
		<div>
			<label id="datestr"></label>
			<div class="control-group">
				<label class="control-label">拜访类型</label>
				<div class="controls">
					<select id="visit_type_input" class="input">
						<option value="1">拜访</option>
						<option value="2">会议</option>
					</select>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="account">医院：</label>
				<div class="controls">
					<input type="hidden" id="account_select" style="width: 200px" tabindex="-1" class="select2-offscreen input">
				</div>
				<label id="contact_label" style="display:none" class="control-label" for="contact">医生：</label>
				<div class="controls">
					<input type="hidden" id="contact_select" data-placeholder="请选择" style="width: 200px" tabindex="-1" class="select2-offscreen input">
				</div>
			</div>
			
			<div class="control-group">
				<table>
					<tr>
						<td><label class="control-label" for="from">开始时间：</label>
							<div id="datetimepickerfrom" class="input-append bootstrap-timepicker">
								<input id="from" name="from" type="text" class="input-small"></input> <span class="add-on"><i class="icon-time"></i></span>
							</div></td><td>&nbsp;&nbsp;&nbsp;</td>
						<td><label class="control-label" for="to">结束时间：</label>
							<div id="datetimepickerto" class="input-append bootstrap-timepicker">
								<input id="to" name="to" type="text" class="input-small"></input> <span class="add-on"> <i class="icon-time"></i>
								</span>
							</div></td>
					</tr>
				</table>
			</div>
			
		</div>
	</div> -->

	<!-- Start of Editor -->
	<div id="event_editor_container" style="display: none" class="container-fluid">
		<div class="row-fluid">
			<div class="span4 offset1">
			<table style="width:100%;"><tr><td>
				<div title="活动">
                   <label id="datestr"></label>
					<div>
						
						<div class="control-group">
							<div class="controls">
								<button id="event_ret_bt" class="btn btn-info">返回</button>
								&nbsp;&nbsp;
								<button id="event_ok_bt" class="btn btn-primary">保存</button>
							</div>
						</div>
						<hr />
						<div class="control-group">
							<label class="control-label" for="from">开始时间：</label>
							<div class="controls">
							  <!--  <div id="datetimepickerfrom" class="input-append bootstrap-timepicker">
								 <input id="from" name="from" type="text" class="input-small" disabled></input> <span class="add-on"><i class="icon-time"></i></span>
							    </div> -->
							    <select id="select_time_from" class="input input-small"></select>
                            </div>
                         </div>
                         <div class="control-group">
							<label class="control-label" for="to">结束时间：</label>
							<div class="controls">
							   <!-- <div id="datetimepickerto" class="input-append bootstrap-timepicker">
								<input id="to" name="to" type="text" class="input-small" disabled></input> <span class="add-on"> <i class="icon-time"></i>
								</span>
							    </div> -->
							    <select id="select_time_to" class="input input-small"></select>
						   </div>
						   
						</div>
                          

						<div class="control-group">
							<label class="control-label">拜访类型</label>
							<div class="controls">
								<select id="visit_type_input" class="input input-small">
									<option value="1">拜访</option>
									<option value="2">会议</option>
								</select>
							</div>
						</div>



						<div class="control-group">
							<label class="control-label" for="account">医院：</label>
							<div class="controls">
								<input type="hidden" id="account_select" style="width: 200px" tabindex="-1" class="select2-offscreen input">
							</div>
							<label id="contact_label" style="display: none" class="control-label" for="contact">医生：</label>
							<div class="controls">
								<input type="hidden" id="contact_select" data-placeholder="请选择" style="width: 200px" tabindex="-1" class="select2-offscreen input">
							</div>
						</div>

					</div>

				</div>
				</td></tr>
				</table>
			</div>
		</div>
		<hr>

		<footer>
			<p>&copy; Company 2013</p>
		</footer>
	</div>
	<!-- End of Editor -->

</body>
</html>